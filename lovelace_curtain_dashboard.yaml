# çª—å¸˜æ§åˆ¶é¢æ¿ - Lovelaceé…ç½®
# å°†æ­¤é…ç½®æ·»åŠ åˆ°Home Assistantçš„ä»ªè¡¨ç›˜

title: çª—å¸˜æ§åˆ¶ä¸­å¿ƒ
icon: mdi:curtains
path: curtain-control
panel: true
cards:
  - type: vertical-stack
    cards:
      # æ ‡é¢˜å¡ç‰‡
      - type: markdown
        content: |
          # ğŸ  æ™ºèƒ½çª—å¸˜æ§åˆ¶ç³»ç»Ÿ
          *åŸºäºBoardlink Curtainç»„ä»¶*

      # å¿«é€Ÿæ§åˆ¶æŒ‰é’®
      - type: horizontal-stack
        title: å¿«é€Ÿæ§åˆ¶
        cards:
          - type: button
            entity: cover.test_curtain
            name: å®Œå…¨æ‰“å¼€
            icon: mdi:curtains-open
            tap_action:
              action: call-service
              service: cover.open_cover
              service_data:
                entity_id: cover.test_curtain
            hold_action:
              action: more-info

          - type: button
            entity: cover.test_curtain
            name: å®Œå…¨å…³é—­
            icon: mdi:curtains-closed
            tap_action:
              action: call-service
              service: cover.close_cover
              service_data:
                entity_id: cover.test_curtain
            hold_action:
              action: more-info

          - type: button
            entity: cover.test_curtain
            name: åœæ­¢è¿åŠ¨
            icon: mdi:stop-circle
            tap_action:
              action: call-service
              service: cover.stop_cover
              service_data:
                entity_id: cover.test_curtain

      # ä½ç½®æ»‘å—æ§åˆ¶
      - type: entities
        title: ç²¾ç¡®æ§åˆ¶
        entities:
          - entity: cover.test_curtain
            name: çª—å¸˜ä¸»æ§
            secondary_info: last-changed
          - type: custom:slider-entity-row
            entity: cover.test_curtain
            name: ä½ç½®è°ƒèŠ‚
            hide_state: false

      # å®æ—¶çŠ¶æ€æ˜¾ç¤º
      - type: glance
        title: å®æ—¶çŠ¶æ€
        entities:
          - entity: cover.test_curtain
            name: çŠ¶æ€
          - entity: cover.test_curtain
            attribute: current_position
            name: ä½ç½®
          - entity: cover.test_curtain
            attribute: open_code
            name: æ‰“å¼€ç 
          - entity: cover.test_curtain
            attribute: close_code
            name: å…³é—­ç 

      # è¿åŠ¨è½¨è¿¹å›¾è¡¨
      - type: vertical-stack
        title: è¿åŠ¨è½¨è¿¹åˆ†æ
        cards:
          - type: custom:apexcharts-card
            card:
              height: 200
            header:
              title: å®æ—¶ä½ç½®è½¨è¿¹
              show: true
            series:
              - entity: cover.test_curtain
                attribute: current_position
                name: çª—å¸˜ä½ç½®
                type: line
                curve: smooth
                stroke_width: 3
                color: '#3498db'
                unit: '%'
            yaxis:
              - min: 0
                max: 100
                decimals: 0
                title:
                  text: ä½ç½®ç™¾åˆ†æ¯”
            xaxis:
              type: datetime
            realtime:
              duration: 5m
              refresh: 1s

          - type: history-graph
            title: 24å°æ—¶è¿åŠ¨è½¨è¿¹
            entities:
              - entity: cover.test_curtain
                attribute: current_position
            hours_to_show: 24
            refresh_interval: 30

      # ä½ç½®ä»ªè¡¨ç›˜
      - type: gauge
        entity: cover.test_curtain
        attribute: current_position
        name: çª—å¸˜å¼€åˆåº¦
        min: 0
        max: 100
        unit: '%'
        needle: true
        severity:
          green: 0
          yellow: 50
          red: 100
        card:
          height: 200

      # è¿åŠ¨ç»Ÿè®¡
      - type: statistics-graph
        title: è¿åŠ¨ç»Ÿè®¡
        entities:
          - entity: cover.test_curtain
            attribute: current_position
        chart_type: bar
        period: hour
        days_to_show: 7
        stat_types:
          - mean
          - max
          - min

      # åœºæ™¯é¢„è®¾
      - type: vertical-stack
        title: åœºæ™¯é¢„è®¾
        cards:
          - type: horizontal-stack
            cards:
              - type: button
                name: æ—©å®‰æ¨¡å¼
                icon: mdi:weather-sunny
                tap_action:
                  action: call-service
                  service: cover.set_cover_position
                  service_data:
                    entity_id: cover.test_curtain
                    position: 80

              - type: button
                name: åˆä¼‘æ¨¡å¼
                icon: mdi:bed
                tap_action:
                  action: call-service
                  service: cover.set_cover_position
                  service_data:
                    entity_id: cover.test_curtain
                    position: 30

              - type: button
                name: å¤œæ™šæ¨¡å¼
                icon: mdi:weather-night
                tap_action:
                  action: call-service
                  service: cover.set_cover_position
                  service_data:
                    entity_id: cover.test_curtain
                    position: 0

              - type: button
                name: é˜…è¯»æ¨¡å¼
                icon: mdi:book-open
                tap_action:
                  action: call-service
                  service: cover.set_cover_position
                  service_data:
                    entity_id: cover.test_curtain
                    position: 60

      # çº¢å¤–ç æ˜¾ç¤º
      - type: entities
        title: çº¢å¤–ç é…ç½®
        entities:
          - type: markdown
            content: |
              **å½“å‰é…ç½®çš„çº¢å¤–ç :**
              - **æ‰“å¼€ç **: `send_open`
              - **å…³é—­ç **: `send_close`
              - **åœæ­¢ç **: `send_stop`
              
              *è¿™äº›ç ç”¨äºæ¨¡æ‹Ÿæµ‹è¯•ï¼Œå®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºçœŸå®çš„çº¢å¤–ç *

      # è°ƒè¯•ä¿¡æ¯
      - type: entity-filter
        title: è°ƒè¯•ä¿¡æ¯
        show_empty: false
        entities:
          - entity: cover.test_curtain
        state_filter:
          - 'open'
          - 'closed'
          - 'opening'
          - 'closing'
        card:
          type: glance
          show_state: true
          show_icon: true

# è‡ªå®šä¹‰å¡ç‰‡é…ç½®ï¼ˆéœ€è¦å®‰è£…ç›¸å…³æ’ä»¶ï¼‰
# 1. apexcharts-card: https://github.com/RomRider/apexcharts-card
# 2. slider-entity-row: https://github.com/thomasloven/lovelace-slider-entity-row
# 3. button-card: https://github.com/custom-cards/button-card